<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://js.stripe.com/v3"></script>
    <script type="text/javascript">
        const todays_date = "{{ todays_date }}";
    </script>
</head>
<body>
    <nav id="toolbar">
        <span class="logout"><a href="/">Logout</a></span>
        <span class="account"><a href="javascript:show_account()"><img src="/static/img/icons/account.png" height="25" style="margin-top:2px" title="Account"/></a></span>
        <select id="game" name="game">
            <option value="" style="text-align: center;">--Choose a Game--</option>"
        </select>
        <!--Horizontal toolbar with icons to show/hide the grid-items -->
        <span class="nav-button active" title="Chat Bot""><a href="#" onclick="toggle_visibility('chatbot')"><i class="fa fa-comment"></i></a></span>
        <span class="nav-button active" title="Game Notes"><a href="#" onclick="toggle_visibility('game_notes')"><i class="fa fa-book"></i></a></span>
        <span class="nav-button active" title="Reminders"><a href="#" onclick="toggle_visibility('reminders')"><i class="fa fa-lightbulb-o"></i></a></span>
        <span class="nav-button active" title="NPCs"><a href="#" onclick="toggle_visibility('npcs')"><i class="fa fa-users"></i></a></span>
    </nav>
    <div id="sortable">
        <div id="chatbot" class="grid-item">
            <header>
                <h1>Chat Bot</h1>
            </header>
            <content>
                <div id="chatbox"></div>
                <form id="chat-form">
                    <input type="text" name="question" id="question" placeholder="Ask something..." required>
                    <input type="submit" value="Ask">
                </form>
            </content>
        </div>
        <div id="game_notes" class="grid-item">
            <header>
                <h1>Game Notes</h1>
            </header>
            <div style="display:relative">
                <label>Date:</label>
                <span>{{todays_date}}</span>
            </div>
            <div>
                <textarea id="notes" name="notes"></textarea>
            </div>
            <input id="save_notes" type="submit" value="Save">
        </div>
        <div id="previous_notes" class="grid-item">
            <header>
                <h1>Previous Notes</h1>
            </header>
            <div id="notes_most_recent">
                <div style="text-align:center">Select a project to get started</div>
            </div>
            <div id="previous_notes_list">
                <div style="text-align:center">Select a project to get started</div>
            </div>
        </div>
        <div id="reminders" class="grid-item">
            <header>
                <h1>Reminders</h1>
            </header>
            <div class="grid-body">
                <div style="position: relative; height: 17px;">
                    <button id="add_npc" onclick="create_reminder()">+ Add Reminder</button>
                </div>
                <div id="reminder_list"><center>Select a project to get started</center></div>
            </div>
        </div>
        <div id="npcs" class="grid-item">
            <header>
                <h1>NPCs</h1>
            </header>
            <div class="grid-body">
                <div id="game_names"><center>Select a project to get started</center></div>
                <div style="position: relative; height: 17px;">
                    <button id="add_npc" onclick="create_npc()">+ Add NPC</button>
                </div>
                <div id="names"><center>Select a project to get started</center></div>
            </div>
        </div>
        <div id="audio" class="grid-item">
            <header>
                <h1>Audio</h1>
            </header>
            <div class="grid-body">
                <div id="audio_status"><center>Select a project to get started</center></div>
            </div>
        </div>
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="close_modal()">&times;</span>
                <div id ="modal-buttons" class="modal-buttons">
                </div>
                <h2 id="modal-header">Modal Header</h2>
            </div>
            <div class="modal-body" id="modal_content">
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
<script type="text/javascript" src="/static/main.js"></script>
<script type="text/javascript">
    const membership_level = "{{membership}}";

    // eslint-disable-next-line no-redeclare
    const game_list = {{ game_list | tojson }};
    let game_select = document.getElementById("game");
    game_list.forEach(function(game) {
        let option = document.createElement("option");
        option.text = game.name;
        option.value = game.id;
        game_select.add(option);
    });
    let option_new = document.createElement("option");
    option_new.text = "-- Create a new Game --";
    option_new.value = "0";
    game_select.add(option_new);

    const subscriptions = [
        {
            header: 'Free',
            price: 'Free',
            priceId: null,
            features: [
                '50 Chat Messages per Month',
                '5 NPCs',
                '1 Campaign',
                'Unlimited Session Notes',
                'Unlimited Reminders'
            ]
        },
        {
            header: 'Basic',
            price: '$10/month',
            priceId: '{{stripe_priceId_10}}',
            features: [
                '500 Chat Messages per Month',
                '50 NPCs',
                '3 Campaigns',
                'Unlimited Session Notes',
                'Unlimited Reminders',
                'AI Note Taking from MP3 (1/Week)'
            ]
        },
    ];
    const stripe_publishable_key = "{{stripe_publishable_key}}";
</script>
</html>